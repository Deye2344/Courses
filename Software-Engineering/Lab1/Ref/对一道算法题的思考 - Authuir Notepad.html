
<!DOCTYPE HTML>
<html class="no-js">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="kibou" content="lite, 0.1.6.2"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="renderer" content="webkit"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="author" content="Authuir"/>
    <!-- The above meta tags must be at top. -->

    <!-- Page Title -->
    <title>对一道算法题的思考 - Authuir Notepad</title>

    <!-- Styles for Theme Kibou -->
    <link href="https://authuir.com/usr/themes/typecho-theme-kibou-lite/css/normalize.css" rel="stylesheet">
    <link href="https://authuir.com/usr/themes/typecho-theme-kibou-lite/css/style.css" rel="stylesheet">
    <link href="https://authuir.com/usr/themes/typecho-theme-kibou-lite/css/schemes.css" rel="stylesheet">
    <link href="https://authuir.com/usr/themes/typecho-theme-kibou-lite/css/highlight.css" rel="stylesheet">

    <script src="https://authuir.com/usr/themes/typecho-theme-kibou-lite/js/particles.min.js"></script>
    <script type="text/javascript">
      /* particlesJS.load(@dom-id, @path-json, @callback (optional)); */
      particlesJS.load('particles', 'https://authuir.com/usr/themes/typecho-theme-kibou-lite/js/asset.json', function() {
        console.log('callback - particles.js config loaded');
      });
    </script>

        
        
        
        
    
    <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <meta name="description" content="Ch.1 前记　　某日邹欣老师在群里出了一道题目。　　题目如下：一个文本文件中有N 个不同的英语单词， 我们能否写一个程序，快速找出最长的能首尾相连的英语单词链，每个单词最多只能用一次。　　例如..." />
<meta name="generator" content="Typecho 1.1/17.10.30" />
<meta name="template" content="typecho-theme-kibou-lite" />
<link rel="pingback" href="https://www.authuir.com/index.php/action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.authuir.com/index.php/action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.authuir.com/index.php/action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="对一道算法题的思考 &raquo; Authuir Notepad &raquo; RSS 2.0" href="https://www.authuir.com/index.php/feed/archives/10/" />
<link rel="alternate" type="application/rdf+xml" title="对一道算法题的思考 &raquo; Authuir Notepad &raquo; RSS 1.0" href="https://www.authuir.com/index.php/feed/rss/archives/10/" />
<link rel="alternate" type="application/atom+xml" title="对一道算法题的思考 &raquo; Authuir Notepad &raquo; ATOM 1.0" href="https://www.authuir.com/index.php/feed/atom/archives/10/" />
<script type="text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-10'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-10'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="text/javascript">
(function () {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        triggers: ['scroll', 'mousemove', 'keyup', 'touchstart'],
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        triggers: ['onfocus', 'onmousemove', 'onkeyup', 'ontouchstart'],
        load: 'onload'
    }, added = false;

    document[event.add](event.load, function () {
        var r = document.getElementById('respond-post-10'),
            input = document.createElement('input');
        input.type = 'hidden';
        input.name = '_';
        input.value = (function () {
    var _fMRLX = 'c53'//'emC'
+'4de'//'FW'
+//'LT'
'b'+//'3V'
'a7'+//'U'
'2'+//'2'
'4'+//'4A'
'6'+'cad'//'KM'
+//'r'
'7'+''///*'AB'*/'AB'
+'5'//'UU'
+//'fSN'
'1'+//'nG'
'1b'+'72'//'H7a'
+'0'//'5E'
+//'K'
'84e'+'0'//'HP'
+//'H'
'663'+/* 'vC'//'vC' */''+'d4'//'98'
, _0bExgk = [];
    
    for (var i = 0; i < _0bExgk.length; i ++) {
        _fMRLX = _fMRLX.substring(0, _0bExgk[i][0]) + _fMRLX.substring(_0bExgk[i][1]);
    }

    return _fMRLX;
})();

        if (null != r) {
            var forms = r.getElementsByTagName('form');
            if (forms.length > 0) {
                function append() {
                    if (!added) {
                        forms[0].appendChild(input);
                        added = true;
                    }
                }
            
                for (var i = 0; i < event.triggers.length; i ++) {
                    var trigger = event.triggers[i];
                    document[event.add](trigger, append);
                    window[event.add](trigger, append);
                }
            }
        }
    });
})();
</script><link rel="stylesheet" type="text/css" href="https://authuir.com/usr/plugins/HighlightJs/res/styles/default.css" />  </head>

  <body id="kibou-lite" class="pure">

    <!--[if lt IE 10]>
      <div class="browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
    <![endif]-->

    <div class="blog-masthead">
      <div id="particles" style="position: absolute;width: 100%;"></div>
      
      <nav class="blog-nav">
        <a class="blog-nav-item" href="https://authuir.com/">Authuir Notepad</a>
                          <a class="blog-nav-item"  href="https://www.authuir.com/index.php/start-page.html" title="关于">关于</a>
              </nav>

    </div>

    <div class="blog-container">
      <div class="blog-row">

        <div class="blog-main">
  
  <article id="article" itemscope="" itemtype="http://schema.org/BlogPosting">
    <h1 class="blog-post-title" itemprop="name headline">对一道算法题的思考</h1>
    <p class="blog-post-meta">
      分类：&nbsp;•
      <time datetime="2017-07-07T20:49:00+00:00" itemprop="datePublished">2017年07月07日</time>
          </p>

        <h1>Ch.1 前记</h1><p>　　某日邹欣老师在群里出了一道题目。</p><p><img src="https://authuir.com/usr/uploads/2017/07/1238892075.png" alt="1.png" title="1.png"></p><p>　　题目如下：一个文本文件中有N 个不同的英语单词， 我们能否写一个程序，快速找出最长的能首尾相连的英语单词链，每个单词最多只能用一次。</p><p>　　例如， 文件里有：</p><pre><code>Apple
Zoo
Elephant
Under
Fox
Dog
Leaf
Tree
</code></pre><p>　　最长的相连英语单词串为：  apple - elephant – tree,  输出到文件里面，是这样的：</p><pre><code>Apple
Elephant
Tree
</code></pre><p>　　要求程序 （WordList.exe）能处理命令行参数，知道什么是输入文件， 输出文件应该放在哪里。  这样，当助教拿到学生的源程序后，就能编译，并运行一系列的测试。</p><pre><code>shell&gt; Wordlist.exe  /i input1.txt   /o  output1.txt
shell&gt; Wordlist.exe  /i input2.txt   /o  output2.txt
</code></pre><!--more--><h1>Ch.2 思路</h1><p>　　乍看之下这道题目不是那么简单，但是仔细思考一下题目有的几个条件：第一，不区分大小写。第二，每个单词只能用一次，就不难发现，其实这道题是等效于<code>求有向图的最小路径</code>这类问题的，因为每个单词的首位字母实际上就是表示图的节点，单词的长度则表示节点之间的权重。</p><p><img src="https://authuir.com/usr/uploads/2017/07/3658325146.jpg" alt="2.jpg" title="2.jpg"></p><p>　　而提到有向图的最长/最短路径问题，就不得不说一下 <code>NP</code>、<code>P</code>、<code>NPC</code>、<code>NP-hard</code>的关系了。</p><ul><li><code>P</code>：多项式（polynomial），指能在多项式时间内解决的问题。</li><li><code>NP</code>：非确定性多项式（non-deterministic polynomial），指不能在多项式时间内解决的问题，但是能在多项式时间内验证问题。</li><li><code>NPC</code>：<code>NP完全问题</code>（NP complete），所有<code>NP问题</code>在多项式时间内都能约化(Reducibility)到它的NP问题，即解决了此<code>NPC问题</code>，所有<code>NP问题</code>也都得到解决。</li><li><code>NP-Hard</code>：<code>NP难问题</code>（NP hard）所有NP问题在多项式时间内都能约化(Reducibility)到它的问题(不一定是NP问题)。</li></ul><p>　　著名的旅行商问题就是一个典型的<code>NP问题</code>，因为你可以很容易就说明每条路径的花费，但是无法证明这条路径是最优路径。但是我们这道题放宽了条件，首先节点的数量是有最大值26的（字母数量），其次，每两个节点之间的路径是可能有多条的且每条路径只能走一遍的（例如 ant 和 absent 这两个单词）。那么这道题还属于<code>NP-Hard</code>吗？</p><p>　　节点的数量是有限的，那么我们就可以通过遍历节点的方式来搜索最大的路径。这样做的缺点显而易见：计算量过大，而且和单词数量规模呈阶乘级别的时间复杂度，但是优点是能保存遍历的状态，下一次遍历之前能知道哪条路径是已经被用过的。</p><h1>Ch.3 解法</h1><p>　　最终还是没有想出来一个好的办法，只好用<code>DFS</code>遍历算法做了一遍，复杂度大概是O(n!)，代码如下：</p><pre><code>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;algorithm&gt;

using namespace std;

#define _MAX_CELL 26

//DFS递归查询
pair&lt;int, vector&lt;int&gt;&gt; DFS(int index, vector&lt;int&gt; route[_MAX_CELL][_MAX_CELL])
{
    unsigned int length = 0;
    vector&lt;int&gt; rox;
    pair&lt;int, vector&lt;int&gt;&gt; rtn;
    rtn.second.push_back(index);

    //寻找下一跳
    for (int i = 0; i &lt; _MAX_CELL; i++)
    {
        if (route[index][i].size() &gt; 0)
        {
            sort(route[index][i].begin(), route[index][i].end());
            int l = route[index][i].back();
            route[index][i].pop_back();
            //进入下一深度之前需要把这条路径暂时删除，因为每个单词只能用一次
            pair&lt;int, vector&lt;int&gt;&gt; tx = DFS(i, route);
            unsigned int tmp = l + tx.first;
            route[index][i].push_back(l);
            if (length &lt; tmp)
            {
                length = tmp;
                rox = tx.second;
            }
        }
    }
    rtn.first = length;
    rtn.second.insert(rtn.second.end(), rox.begin(), rox.end());
    return rtn;
}

void maxLength(vector&lt;string&gt; text)
{
    vector&lt;int&gt; route[_MAX_CELL][_MAX_CELL];
    vector&lt;int&gt; path[_MAX_CELL][_MAX_CELL];
    int head[_MAX_CELL] = {0};

    //构建邻接图
    for (auto iter : text)
    {
        route[iter.front() - 'a'][iter.back() - 'a'].push_back(iter.size());
        head[iter.front() - 'a'] = 1;
    }

    //DFS遍历所有头节点
    pair&lt;int, vector&lt;int&gt;&gt; result = { 0, vector&lt;int&gt;{} };
    for (int k = 0; k &lt; _MAX_CELL; k++)
        if (head[k] == 1)
        {
            pair&lt;int, vector&lt;int&gt;&gt; rt = DFS(k, route);
            if (rt.first &gt; result.first)
            {
                result = rt;
            }
        }

    //打印
    for (int i = 0; i &lt; result.second.size()-1; i++)
        for (auto iter = text.begin(); iter!= text.end(); iter++)
            if ((*iter).front() == ('a' + result.second[i]) &amp;&amp; (*iter).back() == ('a' + result.second[i + 1]))
            {
                cout &lt;&lt; (*iter) &lt;&lt; endl;
                text.erase(iter);
                break;
            }

    return;
}

int main(int argc, char * argv[])
{
    //假设前级已经做了不合法数据验证
    maxLength(vector&lt;string&gt;{
        &quot;apple&quot;,
        &quot;elephant&quot;,
        &quot;zoo&quot;,
        &quot;under&quot;,
        &quot;fox&quot;,
        &quot;dog&quot;,
        &quot;leaf&quot;,
        &quot;tree&quot;,
        &quot;text&quot;,
        &quot;text&quot;
    });

    maxLength(vector&lt;string&gt;{
        &quot;apple&quot;,
        &quot;blephant&quot;,
        &quot;clephand&quot;,
        &quot;flephant&quot;
    });

    return 0;
}
</code></pre>    
    <p itemprop="keywords" class="post-tag-holder" style="padding-top:10px;">标签: 无标签</p>
  </article><!-- /.blog-post -->
  
  
  
  <ul class="article-switch">
    <li class="prev"><a href="https://www.authuir.com/index.php/archives/2/" title="服务器炸了重配">服务器炸了重配</a></li>
    <li class="next"><a href="https://www.authuir.com/index.php/archives/18/" title="对于中间人攻击的一点想法">对于中间人攻击的一点想法</a></li>
  </ul>

  
<div id="comments">

  <!-- Default -->
  
  
  
      <div id="respond-post-10" class="respond">
        <div class="comments-content">
          <!-- Comment Form -->
          <form method="post" action="https://www.authuir.com/index.php/archives/10/comment" id="comment-form" class="comment-form" role="form">
            <h3 id="response">评论卡</h3>
                          <input type="text" name="author" maxlength="12" id="author" class="form-control input-control" placeholder="称呼" value="" required>
              <input type="email" name="mail" id="mail" class="form-control input-control" placeholder="Email" value=""  required>
              <input type="url" name="url" id="url" class="form-control input-control" placeholder="网址" value="" >
                        <textarea name="text" id="textarea" class="form-control" placeholder="请填写您的内容。" required></textarea>
            <a id="cancel-comment-reply-link" href="https://www.authuir.com/index.php/archives/10/#respond-post-10" rel="nofollow" style="display:none" onclick="return TypechoComment.cancelReply();">取消回复</a>            <button type="submit" id="misubmit">提交</button>
          </form>
        </div>
      </div>

      
</div>

                  </div><!-- /.blog-main -->

      </div><!-- /.row -->
    </div><!-- /.container -->
    
    <center>
      <footer class="blog-footer">
        <p>&copy;&nbsp;Copyright&nbsp;2019&nbsp;<a href="https://authuir.com/">Authuir Notepad</a>
                  </p>
        <p>Theme <a style="cursor:default;" href="https://www.metheno.net/">Kibou Lite</a> made with ♥</p>
      </footer>
    </center>

    <!-- Load Theme Dedicated JS -->
    <script src="https://authuir.com/usr/themes/typecho-theme-kibou-lite/js/highlight.js"></script>
    <script src="https://authuir.com/usr/themes/typecho-theme-kibou-lite/js/loadup.js"></script>
    
    
    
        
    
    <script type="text/javascript" src="https://authuir.com/usr/plugins/HighlightJs/res/highlight.pack.js"></script><script type="text/javascript">window.onload = function () {
var codes = document.getElementsByTagName("pre"),
    hlNames = {
        actionscript : /^as[1-3]$/i,
        cmake : /^(make|makefile)$/i,
        cs : /^csharp$/i,
        css : /^css[1-3]$/i,
        delphi : /^pascal$/i,
        javascript : /^js$/i,
        markdown : /^md$/i,
        objectivec : /^objective\-c$/i,
        php  : /^php[1-6]$/i,
        sql : /^mysql$/i,
        xml : /^(html|html5|xhtml)$/i
    }, hlLangs = hljs.LANGUAGES;

for (var i = 0; i < codes.length; i ++) {
    var children = codes[i].getElementsByTagName("code"), highlighted = false;

    if (children.length > 0) {
        var code = children[0], className = code.className;

        if (!!className) {
            if (0 == className.indexOf("lang-")) {
                var lang = className.substring(5).toLowerCase(), finalLang;
            
                if (hlLangs[lang]) {
                    finalLang = lang;
                } else {
                    for (var l in hlNames) {
                        if (lang.match(hlNames[l])) {
                            finalLang = l;
                        }
                    }
                }

                if (!!finalLang) {
                    var result = hljs.highlight(finalLang, code.textContent, true);
                    code.innerHTML = result.value;
                    highlighted = true;
                }
            }
        }

        if (!highlighted) {
            var html = code.innerHTML;
            code.innerHTML = html.replace(/<\/?[a-z]+[^>]*>/ig, "");
            hljs.highlightBlock(code, "", false);
        }
    }
}
}</script><script type="text/javascript" src="https://authuir.com/usr/plugins/LaTex/latex.js"></script><script type="text/javascript">latex.parse("latex");</script>
  </body>
</html>