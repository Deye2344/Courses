# 概率编程总结

## 概率编程的底层原理

### 数理统计学的贝叶斯学派

贝叶斯学派认为一切的概率分布其实都是条件概率分布，用条件概率分布的观点看待随机事件才有意义。也就是说将概率分布$f(x)$作是某个y下的$f(x|y)$。而对概率分布的推断
也围绕这个思想展开，根据条件概率公式
$$
f(x|y)f(y) = f(y|x)f(x)
$$
我们可以根据观测到的f(y|x)计算f(x|y)

### 概率图模型

将随机变量看作结点，将变量之间的关系看作边，这样构成的图就是概率图。概率图有助于我们理解机器学习系统中的变量关系。

## 构建概率程序的基本流程

**根据问题构建随机变量和先验分布**。只要数据量足够大，先验分布对最终结果的影响就可以忽略，所以很多时候对其取正态分布。

**构建变量之间的关系**。根据想要使用的模型构建各种随机变量之间的依赖关系，这些依赖关系可以是确切的函数关系，也可以是某个分布的参数关系。

**根据观测值(数据)计算后验分布**。需要依赖采样技术。比如吉布斯采样方法和蒙特卡洛方法。根据采样结果估计后验概率分布，得到结果。

## 概率编程的优势与劣势

### 优势：易扩展性、简洁性

由于我们将随机变量抽象成不同的结点并分别构建它们之间的关系，结点随时可以新增加，也可以删除。结点之间的关系模型也随时可以修改。
这样就给我们的程序非常大的扩展空间。同时将大量的计算和采样过程隐藏在封装好的API里也让开发变得非常容易，这得益于用贝叶斯推断给出了所有根据变量观测值估计参数的问题一个统一的解决方案，那就是根据观测值计算后验分布。

### 劣势：表达受限、计算消耗资源量比较大

概率编程模型能够完成的任务仅限于能够用概率图模型表达的类型，如果问题本身无法抽象出随机变量和分布，就无法使用该方法。

并且，概率编程的成功在很大程度上依赖于采样方法，因为在很多情况下无法求出解析的解。所以只能通过采样的方法估计出后验分布。采样消耗的计算资源一般都比较多，并且和采样个数以及选取的先验分布都有关系。这样不容易估计一个应用对计算资源的需求。

## 概率编程的发展现状

### Pymc

PyMC3是Python的一个包，能够让用户基于贝叶斯模型构建应用，自主选择不同的方法进行采样估计，计算后验分布。pymc还提供了一系列的分布函数和拟合方法。能够快速构建机器学习应用并对模型进行检查和评估。

### Figaro

Figaro 是一个基于Scala的概率编程框架，内置多种推断方法和概率分布函数。并且可以很灵活地被Scala程序和Java程序调用。
Figaro支持贝叶斯网络和马尔科夫网络的推断，可以说在模型构建方面Figaro做得非常完善。


## 对于ROS机器人场景建模的扩展

从一般的机器学习系统到概率编程系统的思路中，我们可以发现，解决某个具体问题的方案可以划分成适用性更广的元素从而为一类问题提供一个统一的框架。这样的观点可以尝试着应用到场景的建模中去。在ROS系统中的SLAM和navigation程序中，使用贝叶斯滤波进行场景的建模和推理决策，我们可以尝试将类似概率编程的框架应用到SLAM，navigation等模块中，让这些模块的可扩展性和适应性更强。